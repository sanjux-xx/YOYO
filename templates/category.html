<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ category|capitalize }} | Across the Tags</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <style>
  body {
    background: linear-gradient(180deg, #f8fafc 0%, #eef2ff 100%);
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  }

  /* Back button style */
  .btn-link {
    text-decoration: none;
    font-weight: 500;
    color: #2563eb;
  }

  .btn-link:hover {
    text-decoration: underline;
  }

  /* Page Title */
  h2 {
    font-weight: 700;
    background: linear-gradient(90deg, #2563eb, #7c3aed);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Search bar */
  form input {
    border-radius: 50px;
    padding: 14px 22px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 8px 20px rgba(0,0,0,0.05);
  }

  form input:focus {
    border-color: #2563eb;
    box-shadow: 0 8px 25px rgba(37,99,235,0.15);
  }

  /* Product cards */
  .card {
    border: none;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }

  .card:hover {
    transform: translateY(-6px);
    box-shadow: 0 18px 40px rgba(0,0,0,0.15);
  }

  .card img {
    height: 170px;
    object-fit: contain;
    padding: 15px;
    background: #fff;
  }

  /* Clamp long product titles */
  .card h6 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    font-weight: 600;
  }

  /* Price highlight */
  .text-success {
    font-size: 18px;
  }

  /* Buy button style */
  .btn-success {
    border-radius: 50px;
    font-weight: 600;
    background: linear-gradient(45deg, #16a34a, #22c55e);
    border: none;
  }

  .btn-success:hover {
    filter: brightness(1.1);
    transform: scale(1.03);
  }
</style>
</head>

<body>

<div class="container py-4">

  <!-- BACK -->
  <a
    href="/"
    class="btn btn-link mb-3"
    aria-label="Back to home page"
  >
    ← Back to Home
  </a>

  <h2 class="mb-4">{{ category|capitalize }}</h2>

  <!-- CATEGORY SEARCH -->
  <form method="POST" class="mb-4">
    <input
      type="text"
      name="search"
      class="form-control form-control-lg"
      placeholder="Search {{ category }}..."
      autofocus
    >
  </form>

  <!-- PRODUCTS -->
  <div class="row">

    {% if products %}
      {% for product in products %}
      <div class="col-md-3 col-sm-6 mb-4">
        <div class="card h-100 shadow-sm">

          <img
            src="{{ product.image or url_for('static', filename='images/no-image.png') }}"
            class="card-img-top"
            alt="Product image"
            loading="lazy"
          >

          <div class="card-body">
            <h6 class="mb-1">{{ product.title }}</h6>

            {% if product.rating %}
            <small class="text-warning">⭐ {{ product.rating }}</small><br>
            {% endif %}

            <p class="text-success fw-bold mb-1">{{ product.price }}</p>
            <small class="text-muted">{{ product.store }}</small>
          </div>

          <a
            href="{{ product.link }}"
            target="_blank"
            rel="noopener noreferrer"
            class="btn btn-success m-2"
          >
            Buy
          </a>

        </div>
      </div>
      {% endfor %}
    {% elif request.method == 'POST' %}
  <p class="text-center text-muted mt-4">
    No results found. Try a different keyword.
  </p>
{% endif %}
  </div>

</div>

</body>
</html>