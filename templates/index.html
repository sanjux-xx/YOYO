<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Across the Tags</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description"
        content="Across the Tags helps you compare product prices across stores and save money.">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet">

 <style>
  body {
    background: linear-gradient(180deg, #ffffff 0%, #f0f5ff 40%, #e6eeff 100%);
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    color: #333;
    position: relative;
    overflow-x: hidden;
  }

  /* Creative glowing blobs in background */
  body::before,
  body::after {
    content: "";
    position: fixed;
    width: 500px;
    height: 500px;
    border-radius: 50%;
    filter: blur(100px);
    opacity: 0.35;
    z-index: 0;
  }

  body::before {
    background: radial-gradient(circle, #60a5fa, transparent 70%);
    top: 250px;
    left: -150px;
  }

  body::after {
    background: radial-gradient(circle, #a78bfa, transparent 70%);
    bottom: 100px;
    right: -150px;
  }

  .bg-logo {
    position: fixed;
    inset: 0;
    z-index: 0;
    opacity: 0.05;
    pointer-events: none;
  }

  .bg-logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* HERO SECTION */
  .hero {
    background: linear-gradient(120deg, #0f2027, #203a43, #2c5364);
    color: white;
    text-align: center;
    padding: 120px 20px 180px;
    position: relative;
    z-index: 1;
  }

  /* Stylish wave divider */
  .hero::after {
    content: "";
    position: absolute;
    bottom: -80px;
    left: 0;
    width: 100%;
    height: 160px;
    background: white;
    border-top-left-radius: 50% 100%;
    border-top-right-radius: 50% 100%;
  }

  .hero-content {
    max-width: 760px;
    margin: auto;
  }

  .hero h1 {
    font-size: 48px;
    font-weight: 700;
    letter-spacing: 0.5px;
  }

  .hero p {
    opacity: 0.9;
    margin-bottom: 30px;
    font-size: 18px;
  }

  /* Floating search bar */
  .hero-search {
    display: flex;
    max-width: 600px;
    margin: 0 auto;
    background: white;
    border-radius: 60px;
    overflow: hidden;
    box-shadow: 0 25px 60px rgba(0,0,0,0.45);
    border: 4px solid rgba(255,255,255,0.3);
    transform: translateY(20px);
  }

  .hero-search input {
    flex: 1;
    border: none;
    padding: 16px 20px;
    font-size: 16px;
    outline: none;
  }

  .hero-search button {
    background: linear-gradient(45deg, #ff7a18, #ff512f);
    border: none;
    color: white;
    padding: 0 30px;
    font-weight: 700;
  }

  .site-header,
  .container,
  .container-fluid {
    position: relative;
    z-index: 1;
  }

  .site-header {
    text-align: center;
    margin-top: 80px;
    margin-bottom: 10px;
  }

  .site-header h1 {
    color: #2563eb;
    font-weight: 700;
    font-size: 34px;
  }

  .site-header p {
    color: #6b7280;
    margin: 0;
  }

  .home-search {
    display: none;
  }

  /* Glass style content area */
  .container-fluid {
    margin-top: 60px;
    padding: 50px 40px 80px;
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(12px);
    border-radius: 30px 30px 0 0;
    box-shadow: 0 -10px 40px rgba(0,0,0,0.08);
  }

  /* Stylish section heading */
  h2.text-center {
    font-size: 32px;
    font-weight: 700;
    position: relative;
    display: inline-block;
    padding-bottom: 12px;
  }

  h2.text-center::after {
    content: "";
    width: 70px;
    height: 4px;
    background: linear-gradient(90deg, #2563eb, #7c3aed);
    display: block;
    margin: 10px auto 0;
    border-radius: 2px;
  }

  /* CATEGORY CARDS */
  .category-card {
    position: relative;
    display: block;
    height: 260px;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 25px 60px rgba(0,0,0,0.25);
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    text-decoration: none;
  }

  .category-card:hover {
    transform: translateY(-12px) scale(1.03);
    box-shadow: 0 35px 80px rgba(0,0,0,0.35);
  }

  .category-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .category-card::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.6), rgba(0,0,0,0.05));
  }

  .category-card h3 {
    position: absolute;
    bottom: 20px;
    left: 20px;
    color: #fff;
    font-size: 28px;
    font-weight: 700;
    z-index: 2;
    margin: 0;
  }

  .category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
  }

  @media (min-width: 768px) {
    .category-grid { grid-template-columns: repeat(2, 1fr); }
  }

  @media (min-width: 1200px) {
    .category-grid { grid-template-columns: repeat(4, 1fr); }
  }
</style>
</head>

<body>

<!-- HERO SECTION -->
<section class="hero">
  <div class="hero-content">
    <h1>Compare Prices. Save Money.</h1>
    <p>Find the best deals across multiple stores instantly.</p>

    <form method="POST" action="/" class="hero-search">
      <input type="text" name="product_query" placeholder="Search mobiles, laptops, groceries..." required>
      <button type="submit">Search</button>
    </form>
  </div>
</section>

<!-- BACKGROUND LOGO -->
<div class="bg-logo">
  <img src="{{ url_for('static', filename='images/Logo.jpg') }}" alt="">
</div>

<!-- HEADER -->
<div class="site-header">
  <h1>Across the Tags</h1>
  <p>Compare prices. Save money.</p>
</div>

<!-- SEARCH RESULTS -->
{% if products %}
<div class="container mb-5">
  <h4 class="mb-3">Search Results</h4>
  <div class="row g-4">
    {% for product in products %}
    <div class="col-md-3 col-sm-6">
      <div class="card h-100 shadow-sm">
        <img src="{{ product.image if product.image else 'https://via.placeholder.com/300x200?text=No+Image' }}"
             class="card-img-top"
             style="height:160px;object-fit:contain;padding:10px;">
        <div class="card-body">
          <h6>{{ product.title }}</h6>
          <p class="text-success fw-bold">{{ product.price }}</p>
          <small class="text-muted">{{ product.store }}</small>
        </div>
        <button type="button"
                class="btn btn-success m-2"
                onclick='openBuy({{ product.link|tojson }}, {{ product.title|tojson }})'>
          Buy
        </button>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endif %}

{% if request.method == 'POST' and products is not none and products|length == 0 %}
<p class="text-center text-muted mt-4">
  No results found. Try a different keyword.
</p>
{% endif %}

<!-- CATEGORY GRID -->
<div class="container-fluid mt-5 px-lg-5">
  <h2 class="text-center mb-4" style="font-weight:700;color:#1e3c72;">Popular Categories</h2>
  <div class="category-grid">

    <a href="/category/mobiles" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/phone.jpg') }}">
      <h3>Mobiles</h3>
    </a>

    <a href="/category/laptops" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/laptop.jpg') }}">
      <h3>Laptops</h3>
    </a>

    <a href="/category/fruits" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/fruits.jpg') }}">
      <h3>Fruits</h3>
    </a>

    <a href="/category/groceries" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/gro.jpg') }}">
      <h3>Groceries</h3>
    </a>

    <a href="/food" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/food.jpg') }}">
      <h3>Food</h3>
    </a>

  </div>
</div>

<script>
function openBuy(link, title) {
  if (typeof link === "string" && link.startsWith("http")) {
    window.open(link, "_blank", "noopener,noreferrer");
  } else {
    const q = encodeURIComponent(title || "");
    window.open("https://www.google.com/search?q=" + q, "_blank", "noopener,noreferrer");
  }
}
</script>

</body>
</html>