<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Across the Tags</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #e0f7fa, #ffffff);
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
    }

    /* background logo */
    .bg-logo {
      position: fixed;
      inset: 0;
      z-index: 0;
      opacity: 0.06;
      pointer-events: none;
    }

    .bg-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* header */
    .site-header {
      position: relative;
      z-index: 1;
      text-align: center;
      padding: 30px 10px;
    }

    .site-header h1 {
      color: #2563eb;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .site-header p {
      color: #6b7280;
      margin: 0;
    }

    /* home search */
    .home-search {
      position: relative;
      z-index: 1;
      max-width: 900px;
      margin: 0 auto 50px;
    }

    /* category cards (UNCHANGED) */
    .category-card {
      position: relative;
      display: block;
      height: 260px;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-decoration: none;
    }

    .category-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .category-card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.45);
    }

    .category-card h3 {
      position: absolute;
      bottom: 20px;
      left: 20px;
      color: #fff;
      font-size: 26px;
      font-weight: 600;
      z-index: 2;
      margin: 0;
    }

    .category-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 14px 40px rgba(0,0,0,0.25);
    }

    @media (max-width: 768px) {
      .category-card {
        height: 200px;
      }

      .category-card h3 {
        font-size: 20px;
      }
    }
    /* ===== CATEGORY GRID AUTO SYNC ===== */

.category-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
}

/* Tablet */
@media (min-width: 768px) {
  .category-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Laptop & Desktop */
@media (min-width: 1200px) {
  .category-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}
  </style>
</head>

<body>

<!-- BACKGROUND LOGO -->
<div class="bg-logo">
  <img src="{{ url_for('static', filename='images/Logo.jpg') }}">
</div>

<!-- HEADER -->
<div class="site-header">
  <h1>Across the Tags</h1>
  <p>Compare prices. Save money.</p>
</div>

<!-- âœ… HOME SEARCH BAR -->
<!-- HOME SEARCH FORM -->
<div class="container home-search">
  <form method="POST" action="/">
    <input
      type="text"
      name="product_query"
      class="form-control form-control-lg"
      placeholder="Search products..."
      required
    >
    <button class="btn btn-primary mt-3 w-100">Search</button>
  </form>
</div>

<!-- ðŸ”¥ SEARCH RESULTS (OUTSIDE FORM) -->
{% if products %}
<div class="container mb-5 position-relative" style="z-index:1">
  <h4 class="mb-3">Search Results</h4>
  <div class="row g-4">

    {% for product in products %}
    <div class="col-md-3 col-sm-6">
      <div class="card h-100 shadow-sm">
        <img src="{{ product.image }}" class="card-img-top"
             style="height:160px;object-fit:contain;padding:10px;">
        <div class="card-body">
          <h6>{{ product.title }}</h6>
          <p class="text-success fw-bold">{{ product.price }}</p>
          <small class="text-muted">{{ product.store }}</small>
        </div>

        <!-- BUY LINK (SAFE) -->
        <a href="{{ product.link }}"
           target="_blank"
           rel="noopener noreferrer"
           class="btn btn-success m-2">
          Buy
        </a>
      </div>
    </div>
    {% endfor %}

  </div>
</div>
{% endif %}


<!-- ============== CATEGORY GRID ============== -->
<div class="container-fluid mt-5 px-lg-5 position-relative" style="z-index:1">

  <div class="category-grid">

    <!-- Mobiles -->
    <a href="/category/mobiles" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/phone.jpg') }}" alt="Mobiles">
      <h3>Mobiles</h3>
    </a>

    <!-- Laptops -->
    <a href="/category/laptops" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/laptop.jpg') }}" alt="Laptops">
      <h3>Laptops</h3>
    </a>


    <!-- Fruits -->
    <a href="/category/fruits" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/fruits.jpg') }}" alt="Fruits">
      <h3>Fruits</h3>
    </a>

    <!-- Groceries -->
    <a href="/category/groceries" class="category-card">
      <img src="{{ url_for('static', filename='images/categories/gro.jpg') }}" alt="Groceries">
      <h3>Groceries</h3>
    </a>
    
<!-- Food -->
<a href="/food" class="category-card">
  <img src="{{ url_for('static', filename='images/categories/food.jpg') }}" alt="Food">
  <h3>Food</h3>
</a>

  </div>
</div>
</div>
<!-- ================= END CATEGORY GRID ================= -->

</body>
</html>